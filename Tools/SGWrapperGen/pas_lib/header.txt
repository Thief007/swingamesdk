//
// Generated by SGWrapperGen - DO NOT EDIT!
//
// SwinGame exported library
//
{$I SwinGame.inc}

library %(name)s;
  uses SysUtils, Strings, SwinGameTrace, sgShared,
    %(uses)s
  
  procedure TrapException(exc: Exception; fromMethod: String);
  begin
    HasException := true;
    
    if Assigned(exc) then
      ErrorMessage := 'Error from ' + fromMethod + ' - ' + exc.Message
    else
      ErrorMessage := 'Unknown error from ' + fromMethod;
      
    {$IFDEF TRACE}
      Trace('SGSDK.dll', 'Error', fromMethod, ErrorMessage);
    {$ENDIF}
  end;
  
  procedure TriCopyToPtr(tri: Point2DPtr; const fromTri: Triangle);
  var
    i: LongInt;
  begin
    for i := 0 to 2 do
    begin
      (tri + i)^ := fromTri[i];
    end;
  end;
  
  procedure TriCopyFromPtr(var toTri: Triangle; tri: Point2DPtr);
  var
    i: LongInt;
  begin
    for i := 0 to 2 do
    begin
      toTri[i] := (tri + i)^;
    end;
  end;
  
  procedure MatrixCopyToPtr(matrix: SinglePtr; const fromMatrix: Matrix2D);
  var
    i, j: LongInt;
  begin
    //WriteLn('************************');
    for i := 0 to 2 do
    begin
      //Write('|  ');
      for j := 0 to 2 do
      begin
        //Write(fromMatrix[i,j]:4:2, '  ');
        (matrix + (i * 3) + j)^ := fromMatrix[i,j];
        //matrix[i,j] := fromMatrix[i,j];
      end;
      //Writeln('|');
    end;
    //WriteLn('************************');
  end;
  
  procedure MatrixCopyFromPtr(var toMatrix: Matrix2D; matrix: SinglePtr);
  var
    i, j: LongInt;
  begin
    //WriteLn('************************');
    for i := 0 to 2 do
    begin
      //Write('|  ');
      for j := 0 to 2 do
      begin
        toMatrix[i,j] := (matrix + (i * 3) + j)^;
        //toMatrix[i,j] := matrix[i,j];
        
        //Write(toMatrix[i,j]:4:2, '  ');
      end;
      //Writeln('|');
    end;
    WriteLn('************************');
  end;
  
  procedure LineCopyFromPtr(data: LineSegmentPtr; len: LongInt; out arr: LinesArray);
  var
    i: LongInt;
  begin
    if len < 0 then raise Exception.Create('Length of array cannot be negative');

    SetLength(arr, len);

    for i := 0 to len - 1 do
    begin
      arr[i] := (data + i)^;
    end;
  end;
  
  procedure LineCopyToPtr(const arr: LinesArray; len: LongInt; data: LineSegmentPtr);
  var
    i: LongInt;
  begin
    if len < Length(arr) then raise Exception.Create('Error in array size to call expected length to be ' + IntToStr(len));
    
    for i := Low(arr) to High(arr) do
    begin
      (data + i)^ := arr[i];
    end;
  end;
  
  procedure BmpCopyFromPtr(bmp: BitmapPtr; len: LongInt; out arr: BitmapArray);
  var
    i: LongInt;
  begin
    if len < 0 then raise Exception.Create('Length of array cannot be negative');

    SetLength(arr, len);

    for i := 0 to len - 1 do
    begin
      arr[i] := (bmp + i)^;
    end;
  end;
  
  procedure BmpCopyToPtr(const arr: BitmapArray; len: LongInt; bmp: BitmapPtr);
  var
    i: LongInt;
  begin
    if len < Length(arr) then raise Exception.Create('Error in array size to call expected length to be ' + IntToStr(len));
    
    for i := Low(arr) to High(arr) do
    begin
      (bmp + i)^ := arr[i];
    end;
  end;
  
  procedure LongIntCopyFromPtr(data: LongIntPtr; len: LongInt; out arr: LongIntArray);
  var
    i: LongInt;
  begin
    if len < 0 then raise Exception.Create('Length of array cannot be negative');

    SetLength(arr, len);

    for i := 0 to len - 1 do
    begin
      arr[i] := (data + i)^;
    end;
  end;
  
  procedure LongIntCopyToPtr(const arr: LongIntArray; len: LongInt; data: LongIntPtr);
  var
    i: LongInt;
  begin
    if len < Length(arr) then raise Exception.Create('Error in array size to call expected length to be ' + IntToStr(len));
    
    for i := Low(arr) to High(arr) do
    begin
      (data + i)^ := arr[i];
    end;
  end;
  